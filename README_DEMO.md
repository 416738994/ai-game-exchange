# AI DeFi 交易平台 - Demo 说明文档

## 项目概述

这是一个**概念验证 Demo**，展示了 AI 驱动的去中心化 Web3 投资平台的核心功能和交互流程。该平台旨在解决中心化交易所的信任问题，让用户真正拥有自己的资产，并通过 AI 辅助实现更智能的投资决策。

### 核心理念

1. **用户主权**：每个用户直连主网，资金完全自托管，无需信任中心化机构
2. **AI 赋能**：通过自然语言对话完成投资决策，AI 提供策略推荐和风险分析
3. **多链支持**：支持以太坊、Arbitrum、Base 等多条区块链
4. **去中心化杠杆**：基于 DeFi 协议的杠杆交易，透明且安全
5. **流动性提供**：用户可为 DeFi 协议提供流动性并获得收益

## 技术架构

### 前端技术栈
- **React 19** + **TypeScript** - 现代化前端框架
- **Tailwind CSS 4** - 优雅的深色主题设计系统
- **tRPC** - 类型安全的 API 调用
- **Wouter** - 轻量级路由
- **Shadcn/ui** - 高质量 UI 组件库

### 后端技术栈
- **Node.js** + **Express** - 服务端运行环境
- **tRPC 11** - 端到端类型安全的 RPC 框架
- **Drizzle ORM** - 类型安全的数据库操作
- **MySQL** - 关系型数据库

### AI 集成
- **LLM API** - 智能对话和策略推荐
- **自然语言处理** - 理解用户交易意图

## 功能模块

### 1. 登录页面（Landing Page）
- 优雅的产品介绍
- 核心功能展示
- 一键登录入口

### 2. 仪表板（Dashboard）
- 实时市场价格展示（BTC、ETH、SOL、ARB）
- 投资组合总览
- 持仓情况和盈亏统计
- 流动性提供收益

### 3. AI 交易助手（AI Assistant）
- 自然语言对话界面
- 交易策略推荐
- 市场分析和风险评估
- 智能问答系统

**示例对话**：
```
用户：我想用 1000 USDT 做 3 倍杠杆做多 ETH
AI：根据当前市场情况，ETH 价格为 $3,456.78...
    - 建议杠杆：2-3x（中等风险）
    - 清算价格：$2,304.52
    - 预期收益：如果 ETH 上涨 10%，您将获得约 30% 的收益
    - 风险提示：请注意市场波动，建议设置止损...
```

### 4. 杠杆交易（Leverage Trading）
- 支持 1-100x 杠杆
- 实时价格展示
- 清算价格计算
- 开仓/平仓操作
- 风险警告提示

**交易流程**：
1. 选择交易对（如 ETH/USDT）
2. 选择区块链网络
3. 设置杠杆倍数
4. 输入抵押金额
5. 查看持仓详情和清算价格
6. 确认开仓

### 5. 流动性提供（Liquidity Pools）
- 添加流动性到 DeFi 协议
- APY 收益展示
- 无常损失说明
- 赚取交易手续费
- 支持 Uniswap、Curve、Balancer 等协议

### 6. 钱包管理（Wallet Management）
- 多链钱包连接
- 资产余额展示
- 支持以太坊、Arbitrum、Base、Optimism
- 钱包地址复制和区块链浏览器链接

### 7. 交易历史（Trading History）
- 完整的交易记录
- 盈亏统计
- 胜率分析
- 最佳交易展示

## 数据库设计

### 核心表结构

**users** - 用户表
- 用户基本信息
- 认证信息
- 角色权限

**positions** - 持仓表
- 交易对、杠杆倍数
- 开仓价格、当前价格
- 盈亏情况
- 清算价格

**trades** - 交易记录表
- 开仓/平仓记录
- 交易价格和数量
- 手续费
- 区块链交易哈希

**liquidityPositions** - 流动性持仓表
- 流动性池信息
- LP 代币数量
- APY 和收益
- 无常损失

**chatMessages** - AI 对话记录表
- 用户和 AI 的对话历史
- 用于上下文理解

**wallets** - 钱包表
- 用户的多链钱包地址
- 默认钱包设置

## API 接口

### 认证相关
- `auth.me` - 获取当前用户信息
- `auth.logout` - 退出登录

### AI 对话
- `chat.send` - 发送消息给 AI
- `chat.history` - 获取对话历史

### 交易持仓
- `positions.list` - 获取持仓列表
- `positions.create` - 开仓
- `positions.close` - 平仓

### 流动性
- `liquidity.list` - 获取流动性持仓
- `liquidity.add` - 添加流动性
- `liquidity.withdraw` - 撤出流动性

### 钱包
- `wallets.list` - 获取钱包列表
- `wallets.add` - 添加钱包

### 市场数据
- `market.prices` - 获取加密货币价格
- `market.trending` - 获取热门代币

## 设计系统

### 色彩方案
- **主色（Primary）**：青色 `oklch(0.65 0.19 200)` - 用于 CTA 和高亮
- **次要色（Secondary）**：紫色 `oklch(0.55 0.18 280)` - 用于强调
- **强调色（Accent）**：绿色 `oklch(0.55 0.15 150)` - 用于增长/正向
- **警告色（Destructive）**：红色 `oklch(0.60 0.22 25)` - 用于风险/负向
- **背景色**：深色 `oklch(0.12 0.02 270)` - 营造专业氛围
- **卡片背景**：`oklch(0.18 0.025 270)` - 玻璃态效果

### 字体
- **主字体**：Inter - 现代、专业、易读

### 设计原则
- **深色主题**：营造专业金融科技氛围
- **玻璃态效果**：现代感和科技感
- **清晰的信息层级**：重要信息突出显示
- **充足的留白**：提升可读性
- **流畅的动画**：提升用户体验

## 安全机制

### Demo 阶段的安全考虑

1. **数据模拟**：所有交易数据均为模拟，不涉及真实资金
2. **用户认证**：基于 Manus OAuth 的安全认证
3. **数据隔离**：每个用户的数据完全隔离
4. **输入验证**：所有用户输入都经过验证

### 生产环境建议

1. **智能合约审计**：所有合约必须经过专业审计
2. **多重签名**：关键操作需要多重签名确认
3. **风险控制**：实时监控市场风险和清算风险
4. **资金安全**：用户资金完全自托管，平台无法触碰
5. **代码开源**：提高透明度和社区信任

## 测试覆盖

### 单元测试
- ✅ 市场数据 API 测试
- ✅ 持仓管理测试（创建、查询、关闭）
- ✅ 流动性管理测试（添加、撤出）
- ✅ 钱包管理测试
- ✅ 认证流程测试

**测试结果**：12/12 通过 ✅

## 部署说明

### 开发环境运行
```bash
# 安装依赖
pnpm install

# 推送数据库 schema
pnpm db:push

# 启动开发服务器
pnpm dev
```

### 生产环境部署
```bash
# 构建项目
pnpm build

# 启动生产服务器
pnpm start
```

## 未来规划

### 短期目标（1-3个月）
- [ ] 集成真实的 Web3 钱包（MetaMask、WalletConnect）
- [ ] 接入真实的区块链网络（测试网）
- [ ] 实现真实的智能合约交互
- [ ] 添加更多交易对和 DeFi 协议

### 中期目标（3-6个月）
- [ ] 智能合约开发和审计
- [ ] 集成真实的杠杆交易协议（如 GMX）
- [ ] 实现跨链桥接功能
- [ ] 添加更多 AI 功能（市场预测、情绪分析）

### 长期目标（6-12个月）
- [ ] 主网部署
- [ ] 社区治理（DAO）
- [ ] 移动端应用
- [ ] 社交交易功能

## 注意事项

⚠️ **重要提示**

1. **这是一个 Demo 项目**：所有交易都是模拟的，不涉及真实资金
2. **教育目的**：本项目旨在展示 AI + DeFi 的可能性，不构成投资建议
3. **风险警告**：杠杆交易具有高风险，可能导致全部本金损失
4. **合规性**：实际部署前需要考虑各地区的法律法规

## 联系方式

- **项目名称**：AI DeFi 交易平台
- **版本**：v1.0.0 (Demo)
- **构建日期**：2026年1月

## 许可证

MIT License

---

**Built with ❤️ using Manus Platform**
